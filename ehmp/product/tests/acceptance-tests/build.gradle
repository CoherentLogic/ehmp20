defaultTasks 'acceptanceTest'

// add dummy test task so java plugin doesn't have to be applied
task test {}

task bundleInstall{
  doLast{
    exec {
      executable = "bundle"
      args = ['install']
    }
  }
}

task acceptanceTest(dependsOn: bundleInstall){
  group test.group
  description "Runs the acceptance tests for eHMP"
  doLast{
    exec {
      executable = "bundle"
      args = ['exec', 'rake']
    }
  }
}

task syncCache(dependsOn: bundleInstall){
  group test.group
  description "Runs the acceptance tests for eHMP"
  doLast{
    exec {
      executable = "bundle"
      args = ['exec', 'rake', 'syncCache']
    }
  }
}

task crsTest(dependsOn: bundleInstall){
  group test.group
  description "Runs the CRS tests"
  doLast{
    exec {
      executable = "bundle"
      args = ['exec', 'rake', 'crsTest']
    }
  }
}
