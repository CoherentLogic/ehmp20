{
  "parallelPublish": 20,
  "beanstalk": {
    "repoUniversal": {
      "priority": <%= @vxsync['vxsync']['beanstalk_priority'] %>,
      "delay": <%= @vxsync['vxsync']['beanstalk_delay'] %>,
      "ttr": <%= @vxsync['vxsync']['beanstalk_ttr'] %>,
      "timeout": <%= @vxsync['vxsync']['beanstalk_timeout'] %>,
      "initMillis": <%= @vxsync['vxsync']['beanstalk_init_millis'] %>,
      "maxMillis": <%= @vxsync['vxsync']['beanstalk_max_millis'] %>,
      "incMillis": <%= @vxsync['vxsync']['beanstalk_inc_millis'] %>
    },
    "repoDefaults": {
      "host": "<%= @vxsync['ipaddress'] %>",
      "port": <%= @vxsync['vxsync']['beanstalk_processes']['jobrepo']['config']['port'] %>,
      "tubename": "<%= @vxsync['vxsync']['beanstalk_processes']['jobrepo']['config']['tube_name'] %>",
      "tubePrefix": "<%= @vxsync['vxsync']['beanstalk_processes']['jobrepo']['config']['tube_prefix'] %>",
      "jobTypeForTube": <%= @vxsync['vxsync']['beanstalk_processes']['jobrepo']['config']['job_type'] %>
    },
    "jobTypes": {
      "error-request": {},
      "activity-management-event": {}
    }
  },
  "jdsServer": {
    "baseUrl": "http://<%= @jds['ipaddress']%>:<%= @jds['jds']['cache_listener_ports']['general']%>",
    "timeout": 120000
  },
  "generalPurposeJdsServer": {
     "baseUrl": "http://<%= @pjds['ipaddress']%>:<%= @pjds['jds']['cache_listener_ports']['general']%>",
     "urlLengthLimit": 120
  },
  "vistaSites": {
    <% @vista_sites.each_with_index do |site, index| %>
    "<%= site['vista']['site_id']%>": {
      "name": "<%= site['vista']['site']%>",
      "division": "<%= site['vista']['division']%>",
      "host": "<%= site['ipaddress']%>",
      "localIP": "IPADDRES",
      "localAddress": "localhost",
      "port": <%= site['vista']['rpc_port']%>,
      "production": <%= site['vista']['production']%>,
      "accessCode": "<%= site['vista']['access_code']%>",
      "verifyCode": "<%= site['vista']['verify_code']%>",
      "infoButtonOid": "1.3.6.1.4.1.3768",
      "abbreviation": "<%= site['vista']['abbreviation']%>"
    }<%= ',' unless index == @vista_sites.size - 1 %>
    <% end %>
  },
  <% if !@jbpm.nil? %>
  "jbpm": {
      "baseUrl": "http://<%= @jbpm['ipaddress']%>:8080",
      "apiPath": "/business-central/rest",
      "adminUser": {
          "username": "<%= @jbpm[:jbpm][:install][:admin_user] %>",
          "password": "<%= @jbpm_admin_password %>"
      },
      "healthcheckEndpoint": "/history/instances",
      "activityDatabase": {
          "user": "activitydbuser",
          "password": "<%= @jbpm_activitydbuser_password %>",
          "connectString": "<%= @jbpm['ipaddress']%>:<%= @jbpm[:jbpm][:oracle_config][:port] %>/<%= @jbpm[:jbpm][:oracle_config][:sid] %>"
      },
      "notifsDatabase": {
          "user": "notifdb",
          "password": "notifdb",
          "connectString": "<%= @jbpm['ipaddress']%>:<%= @jbpm[:jbpm][:oracle_config][:port] %>/<%= @jbpm[:jbpm][:oracle_config][:sid] %>"
      }
  },
  <% end %>
  "log-level": "warn"
}
